{"version":3,"file":"dropshadow.js","sources":["../src/dropshadow/DropShadowFilter.js"],"sourcesContent":["import vertex from '../fragments/default.vert';\nimport fragment from './dropshadow.frag';\n\n/**\n * Drop shadow filter.\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n * @param {number} [rotation=45] The angle of the shadow in degrees.\n * @param {number} [distance=5] Distance of shadow\n * @param {number} [blur=2] Blur of the shadow\n * @param {number} [color=0x000000] Color of the shadow\n * @param {number} [alpha=0.5] Alpha of the shadow\n */\nexport default class DropShadowFilter extends PIXI.Filter {\n    constructor(rotation = 45, distance = 5, blur = 2, color = 0x000000, alpha = 0.5) {\n        super();\n\n        this.tintFilter = new PIXI.Filter(vertex, fragment);\n        this.blurFilter = new PIXI.filters.BlurFilter();\n        this.blurFilter.blur = blur;\n\n        this.rotation = rotation;\n        this.padding = distance;\n        this.distance = distance;\n        this.alpha = alpha;\n        this.color = color;\n    }\n\n    apply(filterManager, input, output) {\n        const target = filterManager.getRenderTarget();\n        target.clear();\n        if (!output.root) {\n            output.clear();\n        }\n        target.transform = new PIXI.Matrix();\n        target.transform.translate(\n            this.distance * Math.cos(this.angle), \n            this.distance * Math.sin(this.angle)\n        );\n        this.tintFilter.apply(filterManager, input, target);\n        this.blurFilter.apply(filterManager, target, output);\n        super.apply(filterManager, input, output);\n        target.transform = null;\n        filterManager.returnRenderTarget(target);\n    }\n\n    updatePadding() {\n        this.padding = Math.max(this.distance, 10) * this.blur * 2;\n    }\n\n    /**\n     * Distance offset of the shadow\n     * @member {number}\n     * @default 5\n     */\n    get distance() {\n        return this._distance;\n    }\n    set distance(value) {\n        this._distance = value;\n        this.updatePadding();\n    }\n\n    /**\n     * The angle of the shadow in degrees\n     * @member {number}\n     * @default 2\n     */\n    get rotation() {\n        return this.angle / PIXI.DEG_TO_RAD;\n    }\n    set rotation(value) {\n        this.angle = value * PIXI.DEG_TO_RAD;\n    }\n\n    /**\n     * The blur of the shadow\n     * @member {number}\n     * @default 2\n     */\n    get blur() {\n        return this.blurFilter.blur;\n    }\n    set blur(value) {\n        this.blurFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * The alpha of the shadow\n     * @member {number}\n     * @default 1\n     */\n    get alpha() {\n        return this.tintFilter.uniforms.alpha;\n    }\n    set alpha(value) {\n        this.tintFilter.uniforms.alpha = value;\n    }\n\n    /**\n     * The color of the shadow.\n     * @member {number}\n     * @default 0x000000\n     */\n    get color() {\n        return PIXI.utils.rgb2hex(this.tintFilter.uniforms.color);\n    }\n    set color(value) {\n        PIXI.utils.hex2rgb(value, this.tintFilter.uniforms.color);\n    }\n}\n\n"],"names":["super","const"],"mappings":"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"}